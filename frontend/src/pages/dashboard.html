<!DOCTYPE html>
<html lang="de">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title data-i18n-key="navbar_dashboard">mRay Dashboard</title>
  <!-- Keycloak + Auth Schutz -->
  <script src="https://cdn.jsdelivr.net/npm/keycloak-js@24.0.1/dist/keycloak.min.js"></script>
  <script src="../scripts/auth.js" defer></script>

  <!-- i18next + Plugins -->
  <script src="https://unpkg.com/i18next@23.6.16/i18next.min.js"></script>
  <script src="https://unpkg.com/i18next-browser-languagedetector/i18nextBrowserLanguageDetector.min.js"></script>
  <script src="https://unpkg.com/i18next-http-backend/i18nextHttpBackend.min.js"></script>

  <link rel="stylesheet" href="../styles/global_style.css" />
  <link rel="stylesheet" href="../styles/dashboard.css" />
</head>

<body>
  <div id="navbar"></div>

  <main>
    <h1 class="section-title" data-i18n-key="dashboard_title">KI-Images</h1>

    <div class="dashboard-container vertical-layout">
      <div class="filter-controls">
        <select id="filterSelect">
          <option value="" data-i18n-key="dashboard_filter_option">ðŸ”½ Filtern nach...</option>
          <option value="image_name" data-i18n-key="dashboard_filter_name">Name</option>
          <option value="image_tag" data-i18n-key="dashboard_filter_tag">Tag</option>
          <option value="created_at" data-i18n-key="dashboard_filter_created">Hochgeladen am</option>
        </select>
        <input type="text" id="searchInput" placeholder="" data-i18n-key="dashboard_filter_placeholder" />
      </div>

      <div id="dashboard-info" class="details-card">
        <!-- wird dynamisch per JavaScript befÃ¼llt -->
      </div>

      <div class="table-wrapper" id="ki-image-list">
        <p data-i18n-key="loading_ki_images">Lade KI-Images...</p>
      </div>

      <!-- INFO-Bereich (Eski Info Card) -->
      <div class="details-card">
        <h2 data-i18n-key="info_title">Container Logs</h2>
        <p data-i18n-key="info_text">Hier erscheinen alle Logs der KI-Images.</p>
        <!-- Log-Optionen -->
        <div style="margin-bottom: 0.5rem;">
          <label for="log-count" data-i18n-key="log_count_label">Log-Zeilen:</label>
          <input type="number" id="log-count" value="20" min="1" max="500" style="width: 60px;" />
          <button id="refresh-logs" data-i18n-key="refresh_button">ðŸ”„ Aktualisieren</button>
        </div>
        <!-- Log-Ausgabe -->
        <pre id="system-log-output"
              style="max-height: 200px; overflow-y: auto; background-color: #1c1c1c; color: #00ffcc;
                     padding: 1rem; font-size: 0.85rem; border: 1px solid #444; border-radius: 6px;">
        </pre>
      </div>

      <!-- LOG-VIEWER (Container-Loganzeige) -->
      <div class="details-card">
        <h2 data-i18n-key="logviewer_title">Log-Viewer</h2>
        <p data-i18n-key="logviewer_text">Hier kannst du Logs eines bestimmten Containers anzeigen.</p>
        <!-- Container-Auswahl -->
        <div style="margin-bottom: 1rem;">
          <label for="container-select">Container auswÃ¤hlen:</label>
          <select id="container-select"></select>
        </div>
        <!-- Status & Health -->
        <div style="margin-bottom: 1rem;">
          <strong>Status:</strong> <span id="container-status">-</span> |
          <strong>Health:</strong> <span id="container-health">-</span>
        </div>
        <!-- Log-Anzeige Optionen -->
        <div style="margin-bottom: 1rem;">
          <label><input type="checkbox" id="chk-stdout" checked> STDOUT</label>
          <label><input type="checkbox" id="chk-stderr" checked> STDERR</label>
          <label><input type="checkbox" id="chk-timestamps"> Zeitstempel</label>
          <label>Zeilen:
            <input type="number" id="log-tail" value="100" min="10" max="1000" step="10" style="width: 80px;">
          </label>
          <button onclick="loadLogs()">Logs laden</button>
        </div>
        <!-- Container-Log-Ausgabe -->
        <pre id="log-output"
              style="max-height: 300px; overflow-y: auto; background-color: #1c1c1c; color: #00ffcc;
                     padding: 1rem; font-size: 0.85rem; border: 1px solid #444; border-radius: 6px;">
        </pre>
      </div>
    </div>
  </main>

  <footer>Â© mRay</footer>

  <!-- Scriptler -->
  <script src="../scripts/i18n.js"></script>
  <script src="../scripts/dashboard.js?v=20250602"></script>
  <script src="../scripts/container_logs.js"></script>  <!-- Log bÃ¶lÃ¼mÃ¼ iÃ§in ek JS -->
</body>
</html>
